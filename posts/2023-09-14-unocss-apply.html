<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="./favicon.png" type="image/png"><link rel="apple-touch-icon" href="./apple-touch-icon.png"><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" async="" crossorigin="" src="./assets/app-9N8Rzjzc.js"></script><link rel="stylesheet" crossorigin="" href="./assets/app-4g4QHRXh.css"><link rel="modulepreload" crossorigin="" href="./assets/post-ib3PVcRl.js"><link rel="stylesheet" href="./assets/post-Ilx14L8e.css"><link rel="modulepreload" crossorigin="" href="./assets/2023-09-14-unocss-apply-UUh-1BCm.js"><title>关于在 css 模块中使用 Unocss 规则 apply 报错的系列问题</title><meta name="description" content="Just infected with a disease called curiosity."><meta name="theme-color" content="#ffffff"><meta property="og:title" content="关于在 css 模块中使用 Unocss 规则 apply 报错的系列问题"><meta name="twitter:title" content="关于在 css 模块中使用 Unocss 规则 apply 报错的系列问题"></head><body class="font-sans"><div id="app" data-server-rendered="true"><!--[--><main flex="~ col" min-h-full="" p="x-4 t-24 b-6" text-c=""><div flex-1="" mb-6=""><!--[--><header flex="" justify-between="" items-center="" w-full="" h-14="" bg-c="" z-40="" p="x-4 md:x-5" class="absolute top-0 left-0" data-v-6a571180=""><a href="/" class="" font-bold="" un-text="c hover:c-dark" flex="" items-center="" data-v-6a571180=""><img rounded-md="" w-40px="" h-40px="" class="mask mask-squircle" src="/avatar.jpg" alt="avatar" data-v-6a571180=""><div i-fa6-solid:angle-right="" class="prompt inline-block mx-2 lt-sm:hidden" data-v-6a571180=""></div><span text-xl="" font-bold="" mt-1="" lt-sm:hidden="" data-v-6a571180="">Hi@Everyone</span><span class="blink text-xl mt-1 lt-sm:hidden" data-v-6a571180="">_</span></a><nav flex="" space-x-4="" data-v-6a571180=""><a href="/projects" class="" title="Projects" nav-item="" data-v-6a571180=""><div i-ri-lightbulb-line="" md:hidden="" data-v-6a571180=""></div><span lt-md:hidden="" class="" data-v-6a571180="">Projects</span></a><a href="/posts" class="" title="Blog" nav-item="" data-v-6a571180=""><div i-majesticons:paper-fold-text-line="" md:hidden="" data-v-6a571180=""></div><span lt-md:hidden="" class="active" data-v-6a571180="">Blog</span></a><a href="/photos" class="" title="Photos" nav-item="" data-v-6a571180=""><div i-ri-image-fill="" md:hidden="" data-v-6a571180=""></div><span lt-md:hidden="" class="" data-v-6a571180="">Photos</span></a><a nav-item="" href="/search" title="Search" data-v-6a571180=""><div i-uil:search="" data-v-6a571180=""></div></a><button nav-item="" title="Toggle dark" data-v-6a571180=""><div i="carbon-sun dark:carbon-moon" data-v-6a571180=""></div></button><!--[--><!--]--></nav></header><button title="Scroll to top" fixed="" right-3="" bottom-3="" w-10="" h-10="" hover:op100="" rounded-full="" flex="" items-center="" justify-center="" hover-bg-hex-8883="" transition="" duration-300="" z-100="" print:hidden="" class="op0! pointer-events-none" data-v-6a571180=""><div i-ri-arrow-up-line="" data-v-6a571180=""></div></button><!--]--><!--[--><div prose="" prose-lg="" mt-6="" mb-8="" mx-a="" data-v-6af74a53=""><h1 text-4xl="" font-bold="" slide-enter="" data-v-6af74a53="">关于在 css 模块中使用 Unocss 规则 apply 报错的系列问题</h1><p class="op-50 mt-2 slide-enter" data-v-6af74a53="">2023/09/14 · 2 min <span data-v-6af74a53="">· <span i-uil:tag-alt="" mr-1="" text-sm="" data-v-6af74a53=""></span><!--[--><span data-v-6af74a53=""><a href="/posts/tags/apply" class="" hover:underline="" data-v-6af74a53="">@apply</a><span data-v-6af74a53="">, </span></span><span data-v-6af74a53=""><a href="/posts/tags/unocss" class="" hover:underline="" data-v-6af74a53="">unocss</a><!----></span><!--]--></span></p></div><article class="toc-open" data-v-6af74a53=""><div class="prose prose-lg m-auto text-left slide-enter-content" data-v-6af74a53=""><p></p><div class="table-of-contents"><ul><li><a href="#apply-提示错误">‘@apply’ 提示错误</a><ul><li><a href="#解决方案">解决方案</a></li></ul></li><li><a href="#使用自定义规则报错">使用自定义规则报错</a><ul><li><a href="#解决方案-1">解决方案</a></li><li><a href="#别名使用">别名使用</a></li></ul></li></ul></div><p></p><p>在使用 unocss 或者其他原子类 css 框架时，在 css 模块中使用 <code>@apply</code> 会提示错误；虽不影响使用，但是对于强迫症患者来说，真的十分难受。</p><p><img src="/images/in-post/2023-09-14/header.jpeg" alt=""></p><hr><h2 id="apply-提示错误" tabindex="-1">‘@apply’ 提示错误 <a class="header-anchor" href="#apply-提示错误" aria-hidden="true">#</a></h2><p>在 或者 css 文件中使用 ‘@apply’ 会提示错误的问题：</p><p><img src="/images/in-post/2023-09-14/apply-error.png" alt=""></p><p>这个虽然不影响使用，但是对于强迫症来说是一件很难受的事情。所以第一时间，我也去找了解决方案；在 unocss 也有相应的 <a href="https://github.com/unocss/unocss/issues/2401" target="_blank" rel="noopener noreferrer">issues/2401</a> 提到了这个问题，在里面有大佬提出了解决方案，orz…。</p><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-hidden="true">#</a></h3><p><img src="/images/in-post/2023-09-14/apply-error-solution.png" alt=""></p><ul><li>在 vscode 的 settings.json 添加规则</li></ul><div class="language-"><span class="lang"></span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">{</span></span>
<span class="line"><span style="color:#adbac7">  "css.customData": [".vscode/unocss.json"]</span></span>
<span class="line"><span style="color:#adbac7">}</span></span>
<span class="line"><span style="color:#adbac7"></span></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">{</span></span>
<span class="line"><span style="color:#24292e">  "css.customData": [".vscode/unocss.json"]</span></span>
<span class="line"><span style="color:#24292e">}</span></span>
<span class="line"><span style="color:#24292e"></span></span></code></pre></div><ul><li>在 .vscode 文件夹中添加 unocss.json 文件</li></ul><div class="language-"><span class="lang"></span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">// 文件内容</span></span>
<span class="line"><span style="color:#adbac7">{</span></span>
<span class="line"><span style="color:#adbac7">  "version": 1.1,</span></span>
<span class="line"><span style="color:#adbac7">  "atDirectives": [</span></span>
<span class="line"><span style="color:#adbac7">    {</span></span>
<span class="line"><span style="color:#adbac7">      "name": "@apply"</span></span>
<span class="line"><span style="color:#adbac7">    },</span></span>
<span class="line"><span style="color:#adbac7">    {</span></span>
<span class="line"><span style="color:#adbac7">      "name": "@screen"</span></span>
<span class="line"><span style="color:#adbac7">    },</span></span>
<span class="line"><span style="color:#adbac7">  ]</span></span>
<span class="line"><span style="color:#adbac7">}</span></span>
<span class="line"><span style="color:#adbac7"></span></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">// 文件内容</span></span>
<span class="line"><span style="color:#24292e">{</span></span>
<span class="line"><span style="color:#24292e">  "version": 1.1,</span></span>
<span class="line"><span style="color:#24292e">  "atDirectives": [</span></span>
<span class="line"><span style="color:#24292e">    {</span></span>
<span class="line"><span style="color:#24292e">      "name": "@apply"</span></span>
<span class="line"><span style="color:#24292e">    },</span></span>
<span class="line"><span style="color:#24292e">    {</span></span>
<span class="line"><span style="color:#24292e">      "name": "@screen"</span></span>
<span class="line"><span style="color:#24292e">    },</span></span>
<span class="line"><span style="color:#24292e">  ]</span></span>
<span class="line"><span style="color:#24292e">}</span></span>
<span class="line"><span style="color:#24292e"></span></span></code></pre></div><p>添加了相应配置后，问题得到解决。</p><h2 id="使用自定义规则报错" tabindex="-1">使用自定义规则报错 <a class="header-anchor" href="#使用自定义规则报错" aria-hidden="true">#</a></h2><p>但是也出现了新问题，‘@apply’ 只对 unocss 的内置规则有效，自定义规则报错。</p><p><img src="/images/in-post/2023-09-14/apply-self-rules-error.png" alt=""></p><h3 id="解决方案-1" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-1" aria-hidden="true">#</a></h3><p>在 <a href="https://github.com/unocss/unocss/blob/main/packages/transformer-directives/README.md#css-variable-style" target="_blank" rel="noopener noreferrer">@unocss/transformer-directives</a> 源码中给出了解决方案，介绍了 @apply、@screen、@theme 等规则的使用事项。</p><p><img src="/images/in-post/2023-09-14/unocss-transformer-directives.png" alt=""></p><p><img src="/images/in-post/2023-09-14/apply-self-rules-error-solution.png" alt=""></p><p>对于自定义规则，需要使用 <code>--uno:</code> 替代。</p><h3 id="别名使用" tabindex="-1">别名使用 <a class="header-anchor" href="#别名使用" aria-hidden="true">#</a></h3><p>同时，unocss 自带了一些别名，为了省事，可以全部使用 <code>--uno:</code>。</p><p><img src="/images/in-post/2023-09-14/uno-alias.png" alt=""></p></div></article><footer prose-lg="" mx-auto="" mt-16="" slide-enter="" animate-delay-500="" data-v-6af74a53=""><div class="grid md:grid-cols-2 pb-3 text-[0.95em]" data-v-6af74a53=""><a href="https://github.com/cosmoscatts/cosmoscatts.github.io/edit/master/pages/posts/2023-09-14-unocss-apply.md" title="Edit link" target="_blank" rel="noopener noreferrer" class="hover:underline text-c-active" data-v-6af74a53=""><span i-tabler:edit="" w-4.5="" h-4.5="" align-text-top="" data-v-6af74a53=""></span> 在 GitHub 中修改此页</a><span md:text-right="" text-c-light="" data-v-6af74a53=""><span class="i-ic:round-update w-4.5 h-4.5" data-v-6af74a53=""></span> 最后更新于: 2023/9/17 01:42:04</span></div><div class="grid md:grid-cols-2 pt-3 border-t border-c text-[0.95em]" data-v-6af74a53=""><span class="prev" data-v-6af74a53=""><a href="/posts/2023-09-13-animation-tools" class="" hover:underline="" data-v-6af74a53="">记录常用的动画工具网站</a></span><span class="next text-right" data-v-6af74a53=""><!----></span></div><div pl-1="" mt-4="" data-v-6af74a53=""><a href="/posts" class="" text-xl="" font-bold="" op50="" hover="op75 underline underline-offset-4">$ cd ..</a></div></footer><div class="giscus" prose-lg="" mx-auto="" mt-20="" data-v-6af74a53=""></div><!--]--></div><footer text="16px center" mt-20="" w-52vw="" mx-auto="" slide-enter="" animate-delay-800="" flex="" items-center="" justify-between="" lt-md:justify-center=""><div text-c-lighter="">© Cosmoscatts 2023 <span lt-md:hidden="">· Just infected with a disease called curiosity.</span></div><div flex="" items-center="" gap-3="" lt-md:hidden=""><a text-c="" op-50="" hover:op-100="" flex="" items-center="" cursor-pointer="" href="https://github.com/cosmoscatts/cosmoscatts.github.io" title="Code" target="_blank" rel="noopener noreferrer"><div i-carbon-code="" mr-1=""></div>Code </a><a text-c="" op-50="" hover:op-100="" flex="" items-center="" cursor-pointer="" href="/feed.xml" title="RSS" target="_blank" rel="noopener noreferrer"><div i-jam:rss-feed="" mr-1=""></div>RSS</a></div></footer></main><!----><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{}}'</script></body></html>